Ember.Application.initializer({name:"componentCodeeditor",initialize:function(e,t){var o=Ember.get,r=Ember.set,i=Ember.Component.extend({didInsertElement:function(){var e=o(this,"language")||void 0,t=this,i=CodeMirror.fromTextArea(this.$(".codemirror")[0],{lineNumbers:!0,mode:e});i.setValue(o(t,"content")),i.on("change",function(e,o){r(t,"content",e.getValue())}),setTimeout(function(){i.refresh()},400)}});t.register("component:component-codeeditor",i)}}),Ember.Application.initializer({name:"componentRrule",initialize:function(e,t){var o=Ember.get,r=window.RRule,i=Ember.Component.extend({rruleValue:void 0,rruleTooltip:function(){var e=o(this,"rruleValue");return e.replace(/;/g,"; ")}.property("rruleValue"),rruleText:function(){var e=o(this,"rruleValue"),t="";try{var i=r.fromString(e);t=i.toText()}catch(n){t=e}return t.charAt(0).toUpperCase()+t.slice(1)}.property("rruleValue")});t.register("component:component-rrule",i)}}),Ember.Application.initializer({name:"componentRruleEditor",initialize:function(e,t){var o=Ember.String.loc,r=Ember.get,i=Ember.set,n=Ember.isArray,a=window.RRule,s=function(){var e="";try{var t=a.fromString(r(this,"rruleValue"));e=t.toText()}catch(i){e=o("Invalid RRule loaded")}return e},l=function(e){if(void 0!==e){for(var t=e.split(","),o=new Array,r=0;r<t.length;r++)t[r]&&o.push(t[r]);return o}},u=Ember.Component.extend({rruleValue:void 0,rruleText:void 0,rruleHuman:s.property("rruleValue"),tempRule:{freq:3},init:function(){this._super.apply(this,arguments);var e=r(this,"rruleValue");if(e){var t=a.fromString(e).origOptions,o={};for(var s in t){var l=t[s];switch(s){case"wkst":o[s]={value:l.toString()},i(this,"tempRule."+s,l.toString());break;case"freq":o[s]={value:l},i(this,"tempRule."+s,l);break;case"dtstart":case"until":o[s]=l.getTime()/1e3,i(this,"tempRule."+s,l);break;case"byweekday":case"bymonth":var u=r(this,s+"List");i(this,"tempRule."+s,l),n(l)||(l=[l]);for(var c=0;c<l.length;c++){var m=l[c];for(var h in u)u[h]&&u[h].hasOwnProperty("isChecked")&&u[h].value===m&&i(u[h],"isChecked",!0)}break;case"bysetpos":case"bymonthday":case"byyearday":case"byweekno":case"byhour":case"byminute":case"bysecond":i(this,"tempRule."+s,l),n(l)?o[s+"Input"]=l.join():o[s+"Input"]=String(l);break;default:i(this,"tempRule."+s,l),o[s]=l}}this.setProperties(o),i(this,"rruleText",e)}},didInsertElement:function(){this.get("bysetpos"),this.get("bymonthday"),this.get("byyearday"),this.get("byhour"),this.get("byminute"),this.get("bysecond"),this.get("byweekno")},watchRruleText:function(e,t){i(this,"rruleValue",r(e,t))}.observes("rruleText"),updateRrule:function(e,t){var o=r(e,t),n=t.replace(".value",""),s=r(this,"tempRule");""===o||"0"===o?n in s&&delete s[n]:"dtstart"===t||"until"===t?this.tempRule[n]=new Date(1e3*o):this.tempRule[n]=o;var l=new a(Ember.copy(s));i(this,"rruleValue",l.toString()),i(this,"rruleText",l.toString())}.observes("wkst.value","freq.value","dtstart","until","count","interval","bysetpos","bymonth","bymonthday","byyearday","byweekday","byweekno","byhour","byminute","bysecond","byeaster"),freq:{value:a.DAILY},frequencyList:[{name:o("Secondly"),value:a.SECONDLY},{name:o("Minutely"),value:a.MINUTELY},{name:o("Hourly"),value:a.HOURLY},{name:o("Daily"),value:a.DAILY},{name:o("Weekly"),value:a.WEEKLY},{name:o("Monthly"),value:a.MONTHLY},{name:o("Yearly"),value:a.YEARLY}],dtstart:Date.now()/1e3,until:Date.now()/1e3+86400,count:void 0,interval:void 0,wkst:{value:"MO"},wkStartList:[{name:o("Monday"),value:"MO"},{name:o("Tuesday"),value:"TU"},{name:o("Wednesday"),value:"WE"},{name:o("Thursday"),value:"TH"},{name:o("Friday"),value:"FR"},{name:o("Saturday"),value:"SA"},{name:o("Sunday"),value:"SU"}],byweekday:[],byweekdayList:[{name:o("Monday"),value:a.MO,isChecked:!1},{name:o("Tuesday"),value:a.TU,isChecked:!1},{name:o("Wednesday"),value:a.WE,isChecked:!1},{name:o("Thursday"),value:a.TH,isChecked:!1},{name:o("Friday"),value:a.FR,isChecked:!1},{name:o("Saturday"),value:a.SA,isChecked:!1},{name:o("Sunday"),value:a.SU,isChecked:!1}],byWeekDayChange:function(){var e=this.get("byweekdayList").filterBy("isChecked",!0).getEach("value");i(this,"byweekday",e)}.observes("byweekdayList.@each.isChecked"),bymonth:[],bymonthList:[{name:o("January"),value:1,isChecked:!1},{name:o("February"),value:2,isChecked:!1},{name:o("March"),value:3,isChecked:!1},{name:o("April"),value:4,isChecked:!1},{name:o("May"),value:5,isChecked:!1},{name:o("June"),value:6,isChecked:!1},{name:o("July"),value:7,isChecked:!1},{name:o("August"),value:8,isChecked:!1},{name:o("September"),value:9,isChecked:!1},{name:o("October"),value:10,isChecked:!1},{name:o("November"),value:11,isChecked:!1},{name:o("December"),value:12,isChecked:!1}],bymonthChange:function(){var e=this.get("bymonthList").filterBy("isChecked",!0).getEach("value");i(this,"bymonth",e)}.observes("bymonthList.@each.isChecked"),bysetposInput:void 0,bymonthdayInput:void 0,byyeardayInput:void 0,byweeknoInput:void 0,byhourInput:void 0,byminuteInput:void 0,bysecondInput:void 0,bysetpos:function(){return l(this.get("bysetposInput"))}.property("bysetposInput"),bymonthday:function(){return l(this.get("bymonthdayInput"))}.property("bymonthdayInput"),byyearday:function(){return l(this.get("byyeardayInput"))}.property("byyeardayInput"),byhour:function(){return l(this.get("byhourInput"))}.property("byhourInput"),byweekno:function(){return l(this.get("byweeknoInput"))}.property("byweeknoInput"),byminute:function(){return l(this.get("byminuteInput"))}.property("byminuteInput"),bysecond:function(){return l(this.get("bysecondInput"))}.property("bysecondInput")});t.register("component:component-rruleeditor",u)}}),Ember.Application.initializer({name:"JobForm",after:["FormFactory","FormsUtils","HashUtils","DataUtils"],initialize:function(e,t){var o=window.schemasRegistry,r=e.lookupFactory("utility:forms"),i=e.lookupFactory("utility:hash"),n=e.lookupFactory("utility:data"),a=e.lookupFactory("factory:form"),s=Ember.get,l=Ember.set,u=Ember.isNone,c=a("jobform",{title:"Select task type",scheduled:!0,loggedAccountloggedaccountController:void 0,schemas:o.all,init:function(){this._super(arguments),l(this,"loggedaccountController",n.getLoggedUserController()),l(this,"store",DS.Store.create({container:s(this,"container")}));var e=[];for(var t in s(this,"schemas"))if(0===t.indexOf("task")&&t.length>4){var o=t.slice(4),r=s(this,"loggedaccountController.record.rights.models_"+t+".checksum");if(r){o=o.charAt(0).toUpperCase()+o.slice(1);var i=s(this,"schemas."+t+".schema.metadata.icon");e.pushObject({name:o,value:t,icon:i||"fa fa-cogs"})}}l(this,"availableJobs",e)},actions:{selectItem:function(e){console.group("selectJob",this,e);for(var t,n,a=s(this,"availableJobs"),c=0,m=a.length;m>c;c++)a[c].value===e&&(n=a[c]);var h=n.value,d=o.getByName(h).EmberModel,p=s(this,"formContext.params");console.log("params:",p),u(p)||s(p,"xtype")!==h?(p={id:i.generateId("task"),crecord_type:h,xtype:h,jtype:s(this,"jtype")},console.log("Instanciate non-persistent model:",d,p),t=s(this,"store").createRecord(h,p),console.log("model:",t),l(this,"formContext.task",h),l(this,"formContext.paramsType",h),l(this,"formContext.params",t)):t=p,console.log("Show new form with context:",t,this.formContext);r.showNew("taskform",t,{formParent:this,scheduled:s(this,"scheduled"),inspectedItemType:h,inspectedDataItem:t});console.groupEnd()}},partials:{buttons:["formbutton-cancel"]}});t.register("form:jobform",c)}}),Ember.Application.initializer({name:"ScheduleForm",after:["FormFactory","ModelForm"],initialize:function(e,t){var o=e.lookupFactory("factory:form"),r=e.lookupFactory("form:modelform"),i={subclass:r},n=o("scheduleform",{title:"Configure Schedule",init:function(){this._super(),this.refreshPartialsList()},partials:{buttons:["formbutton-previous","formbutton-cancel","formbutton-submit"]}},i);t.register("form:scheduleform",n),Ember.TEMPLATES.scheduleform=Ember.TEMPLATES.modelform}}),Ember.Application.initializer({name:"TaskForm",after:["FormFactory","ModelForm","FormsUtils"],initialize:function(e,t){var o=e.lookupFactory("factory:form"),r=e.lookupFactory("form:modelform"),i=e.lookupFactory("utility:forms"),n=Ember.get,a=Ember.set,s={subclass:r},l=o("taskform",{title:"Configure Job settings",scheduled:!0,parentContext:function(){return n(this,"formParent.formContext")}.property("formParent"),init:function(){this._super(),a(this,"store",DS.Store.create({container:n(this,"container")})),n(this,"scheduled")===!0?a(this,"partials.buttons",["formbutton-next","formbutton-cancel"]):a(this,"partials.buttons",["formbutton-cancel","formbutton-submit"]);var e=i.showNew("scheduleform",n(this,"parentContext"),{formParent:this,title:"Configure Schedule"});a(this,"nextForm",e),this.refreshPartialsList()},actions:{next:function(){console.group("configureTask"),console.log("parent:",n(this,"parentContext")),console.log("ctx:",n(this,"formContext")),console.log("form:",n(this,"nextForm")),i.showInstance(n(this,"nextForm")),console.groupEnd()},submit:function(){console.group("submitTask");var e=n(this,"formParent"),t=n(this,"formContext"),o=n(e,"formContext");a(o,"params",t),console.groupEnd(),n(this,"scheduled")===!0?this._super(arguments):this._super([o])}},partials:{buttons:["formbutton-cancel","formbutton-next"]}},s);t.register("form:taskform",l),Ember.TEMPLATES.taskform=Ember.TEMPLATES.modelform}}),Ember.Application.initializer({name:"CanopsisUiApplicationRouteReopen",after:"ApplicationRoute",initialize:function(e,t){var o=e.lookupFactory("route:application"),r=Ember.get,i=(Ember.set,o.reopen({buildBeforeModelPromises:function(){var e=r(this,"store"),t=e.find("userview","view.app_footer"),o=e.find("userview","view.app_header"),i=this.controllerFor("application");o.then(function(e){i.headerUserview=e}),t.then(function(e){i.footerUserview=e}),r(this,"promiseArray").pushObject(t),r(this,"promiseArray").pushObject(o),this._super()}}));t.register("route:application",i)}}),Ember.Application.initializer({name:"CanopsisUiApplicationViewReopen",after:"ApplicationView",initialize:function(e,t){var o=e.lookupFactory("view:application");Ember.get,Ember.set;o.reopen({didInsertElement:function(){function e(){var e=$(window).height()-$("body > .header").height();$(".wrapper").css("min-height",e+"px");var t=$(".wrapper").height();t>e?$(".left-side, html, body").css("min-height",t+"px"):$(".left-side, html, body").css("min-height",e+"px"),$(".right-side").css("min-height",e+"px")}console.log("main template rendered, trigger $ documentready"),$("[data-toggle='offcanvas']").click(function(e){e.preventDefault(),$(window).width()<=992?($(".row-offcanvas").toggleClass("active"),$(".left-side").removeClass("collapse-left"),$(".right-side").removeClass("strech"),$(".row-offcanvas").toggleClass("relative")):($(".left-side").toggleClass("collapse-left"),$(".right-side").toggleClass("strech"))}),$(".btn").bind("touchstart",function(){$(this).addClass("hover")}).bind("touchend",function(){$(this).removeClass("hover")}),$("[data-widget='collapse']").click(function(){var e=$(this).parents(".box").first(),t=e.find(".box-body, .box-footer");e.hasClass("collapsed-box")?(e.removeClass("collapsed-box"),t.slideDown()):(e.addClass("collapsed-box"),t.slideUp())}),$('.btn-group[data-toggle="btn-toggle"]').each(function(){var e=$(this);$(this).find(".btn").click(function(t){e.find(".btn.active").removeClass("active"),$(this).addClass("active"),t.preventDefault()})}),$("[data-widget='remove']").click(function(){var e=$(this).parents(".box").first();e.slideUp()}),$(".sidebar .treeview").tree(),e(),$(".wrapper").resize(function(){e(),fix_sidebar()}),fix_sidebar()}})}});
//# sourceMappingURL=dist/brick.map.js