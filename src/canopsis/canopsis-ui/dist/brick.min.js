Ember.Application.initializer({name:"JobForm",after:["FormFactory","FormsUtils","HashUtils","DataUtils"],initialize:function(e,t){var o=window.schemasRegistry,i=e.lookupFactory("utility:forms"),r=e.lookupFactory("utility:hash"),s=e.lookupFactory("utility:data"),a=e.lookupFactory("factory:form"),n=Ember.get,l=Ember.set,c=Ember.isNone,m=a("jobform",{title:"Select task type",scheduled:!0,loggedAccountloggedaccountController:void 0,schemas:o.all,init:function(){this._super(arguments),l(this,"loggedaccountController",s.getLoggedUserController()),l(this,"store",DS.Store.create({container:n(this,"container")}));var e=[];console.log("availableJobs CP",n(this,"schemas"));for(var t in n(this,"schemas"))0===t.indexOf("task")&&t.length>4&&e.pushObject({name:t.slice(4),value:t});l(this,"availableJobs",{all:e,byClass:{}})},actions:{selectItem:function(e){console.group("selectJob",this,e);for(var t,s,a=n(this,"availableJobs.all"),m=0,f=a.length;f>m;m++)a[m].name===e&&(s=a[m]);var h=s.value,p=o.getByName(h).EmberModel,u=n(this,"formContext.params");console.log("params:",u),c(u)||n(u,"xtype")!==h?(u={id:r.generateId("task"),crecord_type:h,xtype:h,jtype:n(this,"jtype")},console.log("Instanciate non-persistent model:",p,u),t=n(this,"store").createRecord(h,u),console.log("model:",t),l(this,"formContext.task",h),l(this,"formContext.paramsType",h),l(this,"formContext.params",t)):t=u,console.log("Show new form with context:",t,this.formContext);i.showNew("taskform",t,{formParent:this,scheduled:n(this,"scheduled"),inspectedItemType:h,inspectedDataItem:t});console.groupEnd()}},partials:{buttons:["formbutton-cancel"]}});t.register("form:jobform",m)}}),Ember.Application.initializer({name:"ScheduleForm",after:["FormFactory","ModelForm"],initialize:function(e,t){var o=e.lookupFactory("factory:form"),i=e.lookupFactory("form:modelform"),r={subclass:i},s=o("scheduleform",{title:"Configure Schedule",init:function(){this._super(),this.refreshPartialsList()},partials:{buttons:["formbutton-previous","formbutton-cancel","formbutton-submit"]}},r);t.register("form:scheduleform",s),Ember.TEMPLATES.scheduleform=Ember.TEMPLATES.modelform}}),Ember.Application.initializer({name:"TaskForm",after:["FormFactory","ModelForm","FormsUtils"],initialize:function(e,t){var o=e.lookupFactory("factory:form"),i=e.lookupFactory("form:modelform"),r=e.lookupFactory("utility:forms"),s=Ember.get,a=Ember.set,n={subclass:i},l=o("taskform",{title:"Configure Job settings",scheduled:!0,parentContext:function(){return s(this,"formParent.formContext")}.property("formParent"),init:function(){this._super(),a(this,"store",DS.Store.create({container:s(this,"container")})),s(this,"scheduled")===!0?a(this,"partials.buttons",["formbutton-next","formbutton-cancel"]):a(this,"partials.buttons",["formbutton-cancel","formbutton-submit"]);var e=r.showNew("scheduleform",s(this,"parentContext"),{formParent:this,title:"Configure Schedule"});a(this,"nextForm",e),this.refreshPartialsList()},actions:{next:function(){console.group("configureTask"),console.log("parent:",s(this,"parentContext")),console.log("ctx:",s(this,"formContext")),console.log("form:",s(this,"nextForm")),r.showInstance(s(this,"nextForm")),console.groupEnd()},submit:function(){console.group("submitTask");var e=s(this,"formParent"),t=s(this,"formContext"),o=s(e,"formContext");a(o,"params",t),console.groupEnd(),s(this,"scheduled")===!0?this._super(arguments):this._super([o])}},partials:{buttons:["formbutton-cancel","formbutton-next"]}},n);t.register("form:taskform",l),Ember.TEMPLATES.taskform=Ember.TEMPLATES.modelform}}),Ember.Application.initializer({name:"CanopsisUiApplicationRouteReopen",after:"ApplicationRoute",initialize:function(e,t){var o=e.lookupFactory("route:application"),i=Ember.get,r=(Ember.set,o.reopen({buildBeforeModelPromises:function(){var e=i(this,"store"),t=e.find("userview","view.app_footer"),o=e.find("userview","view.app_header"),r=this.controllerFor("application");o.then(function(e){r.headerUserview=e}),t.then(function(e){r.footerUserview=e}),i(this,"promiseArray").pushObject(t),i(this,"promiseArray").pushObject(o),this._super()}}));t.register("route:application",r)}}),Ember.Application.initializer({name:"CanopsisUiApplicationViewReopen",after:"ApplicationView",initialize:function(e,t){var o=e.lookupFactory("view:application");Ember.get,Ember.set;o.reopen({didInsertElement:function(){function e(){var e=$(window).height()-$("body > .header").height();$(".wrapper").css("min-height",e+"px");var t=$(".wrapper").height();t>e?$(".left-side, html, body").css("min-height",t+"px"):$(".left-side, html, body").css("min-height",e+"px"),$(".right-side").css("min-height",e+"px")}console.log("main template rendered, trigger $ documentready"),$("#loading").remove(),$("#loadingInfo").remove(),$("#moduleList").remove(),$("[data-toggle='offcanvas']").click(function(e){e.preventDefault(),$(window).width()<=992?($(".row-offcanvas").toggleClass("active"),$(".left-side").removeClass("collapse-left"),$(".right-side").removeClass("strech"),$(".row-offcanvas").toggleClass("relative")):($(".left-side").toggleClass("collapse-left"),$(".right-side").toggleClass("strech"))}),$(".btn").bind("touchstart",function(){$(this).addClass("hover")}).bind("touchend",function(){$(this).removeClass("hover")}),$("[data-widget='collapse']").click(function(){var e=$(this).parents(".box").first(),t=e.find(".box-body, .box-footer");e.hasClass("collapsed-box")?(e.removeClass("collapsed-box"),t.slideDown()):(e.addClass("collapsed-box"),t.slideUp())}),$('.btn-group[data-toggle="btn-toggle"]').each(function(){var e=$(this);$(this).find(".btn").click(function(t){e.find(".btn.active").removeClass("active"),$(this).addClass("active"),t.preventDefault()})}),$("[data-widget='remove']").click(function(){var e=$(this).parents(".box").first();e.slideUp()}),$(".sidebar .treeview").tree(),e(),$(".wrapper").resize(function(){e(),fix_sidebar()}),fix_sidebar()}})}});
//# sourceMappingURL=dist/brick.map.js