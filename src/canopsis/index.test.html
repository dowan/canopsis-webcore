<!DOCTYPE html>
<html lang="en">
    <head>
      <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
      <meta content="utf-8" http-equiv="encoding">
        <meta charset="utf-8" />
        <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Canopsis Unit tests</title>
        <link rel="icon" type="image/png" href="/static/canopsis/media/favicon.png" />

        <!-- CSS -->
        <link rel="stylesheet" type="text/css" href="/static/canopsis/style.css" />

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
            <![endif]-->
        <script type="application/javascript">
            //TODO put this in canopsisConfiguration?
            window.environment = 'test';
        </script>

        <!-- qunit must be availalbe before ember qunit loads -->
        <script type="text/javascript" src="core/lib/externals/qunit/qunit/qunit.js"></script>

        <!-- RequireJS -->
        <script
            type="application/javascript"
            src="/static/canopsis/core/lib/externals/requirejs/require.js"
            data-main="/static/canopsis/requirejs.conf">
        </script>


    </head>
    <body>
        <ul class="nav nav-tabs">
            <li><a href="#unittest" class="active" data-toggle="tab">Unit test</a></li>
            <li><a href="#canopsisapp" data-toggle="tab">Canopsis app</a></li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane fade" class="active" id="unittest">
                <div id="qunit"></div>
            </div>
            <div class="tab-pane fade" id="canopsisapp">
                <div id="applicationdiv"></div>
            </div>
        </div>



       <!--
       <script type="text/x-handlebars">
          <h2>Welcome to Ember.js</h2>
             {{outlet}}
       </script>

       <script type="text/x-handlebars" data-template-name="index">
          <ul>
             {{#each item in model}}
                <li>{{my-color name=item}}</li>
             {{/each}}
          </ul>
       </script>

       <script type="text/x-handlebars" data-template-name="components/my-color">
           My Color: {{name}}
       </script>

       <script type="text/javascript">
             //Creates an instance of Ember.Application and assign it to a global variable
             App = Ember.Application.create();

             //Customize the behavior of a route by creating an 'Ember.Route' subclass
             App.IndexRoute = Ember.Route.extend({
                //If you want to render a template with the route handler, implement the 'model' hook
                model: function() {
                   return ['red', 'yellow', 'blue'];
                }
             });

             App.myColorComponent = Ember.Component.extend({
                templateName: 'my-color',
                style: function() {
                   return 'color: ' + this.get('name') + ';';
                }.property('name')
             });

            //These methods are used to prepare the application for testing
            //emq.globalize();
            App.setupForTesting();
            App.rootElement = '#ember-testing';   //Ember.js applications's root element
            setResolver(Ember.DefaultResolver.create({ namespace: App }));

            //Test the component done using the 'moduleForComponent' helper and will find the component by name(my-color)
            moduleForComponent('my-color');
               test("changing colors", function(){
                  //'this.subject()' is available because we used 'moduleForComponent'
                  var component = this.subject();
            //This is an async function and should be wrapped using 'Ember.run'
            Ember.run(function(){
              component.set('name','red');
            });

            //First call to $() renders the component
            equal(this.$().attr('style'), 'color: red;');

            Ember.run(function(){
               component.set('name', 'green');
            });
            equal(this.$().attr('style'), 'color: green;');
            });

            test("template", function(){
               var component = this.subject();   //'this.subject()' is available because we used 'moduleForComponent'
               //First call to $() renders the component
               equal($.trim(this.$().text()), 'My Color:');
                  //This is another async function and should be wrapped using 'Ember.run'
                  Ember.run(function(){
                     component.set('name', 'green');
                  });
               equal($.trim(this.$().text()), 'My Color: green');
            });
       </script>
       -->
    </body>
</html>

