{{#if controller.loaded}}
	<div class="btn-toolbar canopsis-toolbar" role="toolbar">
		<div class="pull-left">
			{{#if controller.selection_toolbar}}
				{{tr 'For the selection'}} :
				{{#each toolitem in controller.selection_toolbar}}
					{{partial toolitem}}
				{{/each}}
			{{/if}}
		</div>
		{{#if Canopsis.utils.session.rights.list_filters.checksum}}
			<div class="pull-right btn-group" data-toggle="btn-toggle">
				<button class="btn btn-default" {{action setFilter controller.default_filter}}>{{tr 'All'}}</button>
				{{#each filter in controller.filters}}
					<button type="button" class="btn btn-default editable" data-col="all" {{action setFilter filter.filter}}>{{filter.title}} 
						<small class="badge bg-blue" {{action editFilter filter}}> <i class="fa fa-wrench"></i></small>
						<small class="badge bg-orange" {{action removeFilter filter}}> <i class="fa fa-minus"></i></small>
					</button>
				{{/each}}
				<button type="button" class="btn btn-primary" {{action addUserFilter}} data-col="all">
					<i class="fa fa-plus"></i> {{tr 'Add'}}
				</button>
			</div>
		{{/if}}
		<div class="pull-right btn-group" data-toggle="btn-toggle">
			{{#each toolitem in controller.actions_toolbar}}
				{{partial toolitem}}
			{{/each}}
		</div>
		<div style="clear:both"></div>
		<br/>
		{{#if Canopsis.utils.session.rights.list_search.checksum}}
			<div class="pull-right">
				{{tr 'Search'}} :
				{{component-searchbar value=controller.searchFieldValue placeholder="Search" target=controller searchableAttributes=controller.searchableAttributes}}
			</div>
		{{/if}}
		<div class="pull-left dataTables_filter">
			{{view Ember.Select
				content=controller.itemsPerPagePropositions
				value=controller.itemsPerPage
				class="inlineInput"
			}}
			{{tr 'records per page'}}
		</div>
	</div>
	<div class="table-responsive">
		<table {{bind-attr id="controller.id"}} class="table table-striped table-bordered table-hover dataTable">
			<thead>
				<tr>
					<th>
						{{component-checkbox checked=controller.isAllSelected class="toggle"}}
					</th>
					{{#each attr in controller.shown_columns}}
						{{#group}}
							{{#if attr.options.show}}
								<th {{bind-attr class="attr.headerClassName"}} {{action sort attr}}>
									{{#if attr.options.label}}
										{{tr attr.options.label}}
									{{else}}
										{{tr attr.field}}
									{{/if}}
								</th>
							{{/if}}
						{{/group}}
					{{/each}}
					{{#if controller.item_actions}}
						<th>{{tr 'Actions'}}</th>
					{{/if}}
				</tr>
			</thead>
			{{#if controller.config.cloaking}}
				{{cloaked-collection
					cloakView="listline"
					content=controller.widgetData
					tagName='tbody'
					itemController=Ember.Controller
					parentController=this}}
			{{else}}
				<tbody>
					{{#each controller.widgetData}}
						{{render "listline" this
							parentController=controller}}
					{{/each}}
				</tbody>
			{{/if}}
		</table>
		{{#unless controller.widgetData.content.length}}
			<div class="noRecordsFound">{{tr 'No matching records found'}}</div>
		{{/unless}}
	</div>
	<div class="btn-toolbar canopsis-toolbar" role="toolbar">
		<div class="pull-left">
			{{tr 'Showing'}} {{controller.paginationFirstItemIndex}} {{tr 'to'}} {{controller.paginationLastItemIndex}} {{tr 'of'}} {{controller.itemsTotal}} {{tr 'entries'}}
		</div>
		<div style="clear:both"></div>
		<div class="pull-left">
			{{#if controller.selection_toolbar}}
				{{tr 'For the selection'}} :
				{{#each toolitem in controller.selection_toolbar}}
					{{partial toolitem}}
				{{/each}}
			{{/if}}
		</div>
		<div class="pull-right">
			{{#group}}
				<button type="button" class="btn btn-small btn-default" {{action prevPage}}>← {{tr 'Previous'}}</button>
					{{tr 'Page'}} {{controller.currentPage}} / {{controller.totalPages}}
				<button type="button" class="btn btn-small btn-default" {{action nextPage}}>{{tr 'Next'}} → </button>
			{{/group}}
		</div>
	</div>
{{else}}
	{{#if controller.dataError.statusText}}
		<i class="fa fa-warning"></i>
		{{tr 'Error while loading data'}} ({{controller.dataError.statusText}})
	{{else}}
		<i class="fa fa-refresh fa-spin"></i>
		{{tr 'Loading'}} ...
	{{/if}}
{{/if}}
