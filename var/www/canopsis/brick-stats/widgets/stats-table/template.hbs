{{#if controller.show_user}}
    <h1>Statistiques sur les utilisateurs</h1>

    <table class="table table-bordered table-responsive">
        <thead>
            <tr>
                <th rowspan="3">Utilisateur</th>

                {{#if controller.show_advanced}}
                    <th rowspan="2" colspan="3">Durée de session</th>
                    <th colspan="9">Délais</th>
                    <th colspan="3">Délais cumulés</th>
                {{/if}}

                <th>Compteurs d'acquittement</th>
            </tr>
            <tr>
                {{#if controller.show_advanced}}
                    <th colspan="3">Résolution</th>
                    <th colspan="3">Acquittement</th>
                    <th colspan="3">Résolution depuis acquittement</th>

                    <th rowspan="2">Résolution</th>
                    <th rowspan="2">Acquittement</th>
                    <th rowspan="2">Résolution depuis acquittement</th>
                {{/if}}

                {{#each controller.userCounters as |countername|}}
                    <th rowspan="2">{{countername}}</th>
                {{/each}}
            </tr>

            <tr>
                {{#if controller.show_advanced}}
                    <th>Minimum</th>
                    <th>Moyenne</th>
                    <th>Maximum</th>

                    <th>Minimum</th>
                    <th>Moyenne</th>
                    <th>Maximum</th>

                    <th>Minimum</th>
                    <th>Moyenne</th>
                    <th>Maximum</th>

                    <th>Minimum</th>
                    <th>Moyenne</th>
                    <th>Maximum</th>
                {{/if}}
            </tr>
        </thead>

        <tbody>
            {{#each controller.userTable as |scope|}}
                <tr>
                    <td>{{scope.user.__name__}}</td>
                    {{#if controller.show_advanced}}
                        <td>{{hr scope.user.session_duration.min.value unit="s"}}</td>
                        <td>{{hr scope.user.session_duration.average.value unit="s"}}</td>
                        <td>{{hr scope.user.session_duration.max.value unit="s"}}</td>

                        <td>{{hr scope.user.alarm_solved.min.value unit="s"}}</td>
                        <td>{{hr scope.user.alarm_solved.average.value unit="s"}}</td>
                        <td>{{hr scope.user.alarm_solved.max.value unit="s"}}</td>

                        <td>{{hr scope.user.alarm_ack_delay.min.value unit="s"}}</td>
                        <td>{{hr scope.user.alarm_ack_delay.average.value unit="s"}}</td>
                        <td>{{hr scope.user.alarm_ack_delay.max.value unit="s"}}</td>

                        <td>{{hr scope.user.alarm_ack_solved.min.value unit="s"}}</td>
                        <td>{{hr scope.user.alarm_ack_solved.average.value unit="s"}}</td>
                        <td>{{hr scope.user.alarm_ack_solved.max.value unit="s"}}</td>

                        <td>{{hr scope.user.alarm_solved.sum.value unit="s"}}</td>
                        <td>{{hr scope.user.alarm_ack_delay.sum.value unit="s"}}</td>
                        <td>{{hr scope.user.alarm_ack_solved.sum.value unit="s"}}</td>
                    {{/if}}

                    {{#each scope.counters as |counter|}}
                        <td>{{hr counter.value}}</td>
                    {{/each}}
                </tr>
            {{/each}}
        </tbody>
    </table>

    {{#if controller.show_advanced}}
        <div class="chart-container">
            {{component-c3js series=controller.userDelaySeries}}

            <p><center><b>Délais utilisateurs</b></center></p>
        </div>
    {{/if}}
{{/if}}

{{#if controller.show_event}}
    {{#if controller.show_advanced}}
        <h1>Statistiques sur les événements</h1>

        <table class="table table-bordered table-responsive">
            <tbody>
                <tr class="info">
                    <th colspan="2">Délais</th>
                </tr>
                <tr>
                    <td rowspan="3">Acquittement</td>
                    <td>{{hr controller.events.__canopsis__.alarm_ack_delay.min.value unit="s"}}</td>
                </tr>
                <tr>
                    <td>{{hr controller.events.__canopsis__.alarm_ack_delay.average.value unit="s"}}</td>
                </tr>
                <tr>
                    <td>{{hr controller.events.__canopsis__.alarm_ack_delay.max.value unit="s"}}</td>
                </tr>
                <tr>
                    <td rowspan="3">Résolution</td>
                    <td>{{hr controller.events.__canopsis__.alarm_solved_delay.min.value unit="s"}}</td>
                </tr>
                <tr>
                    <td>{{hr controller.events.__canopsis__.alarm_solved_delay.average.value unit="s"}}</td>
                </tr>
                <tr>
                    <td>{{hr controller.events.__canopsis__.alarm_solved_delay.max.value unit="s"}}</td>
                </tr>
                <tr>
                    <td rowspan="3">Résolution avec acquittement</td>
                    <td>{{hr controller.events.__canopsis__.alarm_ack_solved_delay.min.value unit="s"}}</td>
                </tr>
                <tr>
                    <td>{{hr controller.events.__canopsis__.alarm_ack_solved_delay.average.value unit="s"}}</td>
                </tr>
                <tr>
                    <td>{{hr controller.events.__canopsis__.alarm_ack_solved_delay.max.value unit="s"}}</td>
                </tr>

                <tr class="info">
                    <th colspan="2">Délais cumulés</th>
                </tr>
                <tr>
                    <td>Acquittement</td>
                    <td>{{hr controller.events.__canopsis__.alarm_ack_delay.sum.value unit="s"}}</td>
                </tr>
                <tr>
                    <td>Résolution</td>
                    <td>{{hr controller.events.__canopsis__.alarm_solved_delay.sum.value unit="s"}}</td>
                </tr>
                <tr>
                    <td>Résolution avec acquittement</td>
                    <td>{{hr controller.events.__canopsis__.alarm_ack_solved_delay.sum.value unit="s"}}</td>
                </tr>
                
                <tr class="info">
                    <th colspan="2">Compteurs</th>
                </tr>

                <tr class="success"><td colspan="2">Total</td></tr>
                {{#each controller.eventCounterTotal as |scope|}}
                    <tr>
                        <td>{{scope.__name__}}</td>
                        <td>{{hr scope.value}}</td>
                    </tr>
                {{/each}}
                <tr class="success"><td colspan="2">Acquittée</td></tr>
                {{#each controller.eventCounterAck as |scope|}}
                    <tr>
                        <td>{{scope.__name__}}</td>
                        <td>{{hr scope.value}}</td>
                    </tr>
                {{/each}}
                <tr class="success"><td colspan="2">Résolue</td></tr>
                {{#each controller.eventCounterSolved as |scope|}}
                    <tr>
                        <td>{{scope.__name__}}</td>
                        <td>{{hr scope.value}}</td>
                    </tr>
                {{/each}}
                <tr class="success"><td colspan="2">Résolue avec acquittement</td></tr>
                {{#each controller.eventCounterAckSolved as |scope|}}
                    <tr>
                        <td>{{scope.__name__}}</td>
                        <td>{{hr scope.value}}</td>
                    </tr>
                {{/each}}
            </tbody>
        </table>

        <div class="chart-container">
            {{component-c3js series=controller.alarmDelaySeries}}

            <p><center><b>Délais d'événements</b></center></p>
        </div>

        <div class="chart-container">
            {{component-c3js series=controller.alarmSeries}}

            <p><center><b>Compteurs d'événements</b></center></p>
        </div>
    {{/if}}
{{/if}}